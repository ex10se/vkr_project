<div id="app-center" fxFlex="100" fxLayoutAlign="center">
  <div fxFlex="70" fxLayout="row wrap" fxLayoutGap="10px">


    <ng-container *ngIf="basket.length == 0 && !isBasketSubmitted"><h1>Корзина пуста</h1></ng-container>
    <ng-container *ngIf="basket.length == 0 && isBasketSubmitted"><h1>Заказ оформлен</h1></ng-container>
    <ng-container *ngIf="basket.length > 0">
      <h1>Моя корзина</h1>

      <ng-container *ngIf="!isAuth">
        <div style="text-align: center;">
          <h2>Вам необходимо авторизоваться</h2>
          <button mat-raised-button (click)="signInWithGoogle()" color="primary">Google</button>
        </div>
      </ng-container>

      <ng-container *ngIf="isAuth">
        <div style="text-align: center;">
          <button mat-raised-button (click)="submitBasket()" color="accent">Отправить заказ</button>
        </div>
      </ng-container>

      <button mat-raised-button class="buttonDeleteAll" (click)="clearBasket()" color="warn">Очистить корзину</button>
      <!--  TODO нормальный дизайн корзины -->
      <!--  TODO цена корзины -->

      <ng-container *ngFor="let product of basket">
        <mat-card class="example-card">
          <mat-card-header style="height: 100px;">
            <div mat-card-avatar class="example-header-image" style="width: 90px;">
              <img [src]="product['get_small_image_url']" [alt]="product.name"/>
            </div>
            <mat-card-title>{{ product.name }}</mat-card-title>
            <mat-card-subtitle>{{ product['category']['name'] }}</mat-card-subtitle>
            <mat-card-subtitle>{{ product['subcategory']['name'] }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
          </mat-card-content>
          <mat-card-actions>
            <button class="price" mat-stroked-button disabled>{{product['get_price']}} ₽</button>
            <button mat-raised-button color="accent" (click)="delFromBasket(product.id)" value="{{product.id}}">
              Удалить из корзины
            </button>
          </mat-card-actions>
        </mat-card>
      </ng-container>
    </ng-container>

  </div>
</div>
